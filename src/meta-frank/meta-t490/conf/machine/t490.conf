
require conf/machine/include/x86/tune-x86-64-v3.inc


WKS_FILE ?= "systemd-boot-t490.wks"
MACHINE_ESSENTIAL_EXTRA_RDEPENDS += "kernel-image"
# do_image_wic[depends] += "mtools-native:do_populate_sysroot dosfstools-native:do_populate_sysroot virtual/bootloader:do_deploy"
# do_image_wic[depends] += "syslinux:do_populate_sysroot syslinux-native:do_populate_sysroot mtools-native:do_populate_sysroot dosfstools-native:do_populate_sysroot"


SERIAL_CONSOLES ?= "115200;ttyS0 115200;ttyO0 115200;ttyAMA0"

TARGET_ARCH = "x86_64"

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto"
PREFERRED_PROVIDER_virtual/bootloader = "systemd-boot"

MACHINE_FEATURES = "\
    acpi \
    alsa \
    bluetooth \
    efi \
    keyboard \
    pcbios \
    pci \
    rtc \
    screen \
    usbhost \
    vfat \
"

KERNEL_IMAGETYPE = "bzImage"

IMAGE_FSTYPES ?= "ext4 wic.gz"

# IMAGE_BOOT_FILES ?= "u-boot.${UBOOT_SUFFIX} ${SPL_BINARY} ${KERNEL_IMAGETYPE} ${DTB_FILES}"
